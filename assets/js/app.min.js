!function(e,o,t){"use strict";for(var a=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!o.requestAnimationFrame;++n)o.requestAnimationFrame=o[i[n]+"RequestAnimationFrame"],o.cancelAnimationFrame=o[i[n]+"CancelAnimationFrame"]||o[i[n]+"CancelRequestAnimationFrame"];o.requestAnimationFrame||(o.requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-a)),n=o.setTimeout(function(){e(t+i)},i);return a=t+i,n}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(e){clearTimeout(e)})}(jQuery,this,_);var $doc=$(document),win=$(window),Modernizr=window.Modernizr,AnimationsArray=[];!function(r,e,t){e.SITE={init:function(){var a=this,e=r("#wrapper");pl=e.find(">.preloader"),e.waitForImages({finished:function(e,t,i){for(var n in r("#wrapper").css("padding-bottom",r("footer").innerHeight()),TweenMax.to(pl,1,{autoAlpha:0,ease:Quart.easeOut,onComplete:function(){pl.css("display","none")}}),a)if(a.hasOwnProperty(n)){var o=a[n];void 0!==o.selector&&void 0!==o.init&&0<r(o.selector).length&&o.init()}},waitForAll:!0})}},win.resize(function(){r("#wrapper").css("padding-bottom",r("footer").innerHeight())}),win.scroll(function(){}),$doc.ready(function(){e.SITE.init()})}(jQuery,this,_),function(e,t,i){t.SITE.animation={selector:"#wrapper .animation:not(.animation-start)",init:function(){if(void 0!==e.fn.waypoint){e(this.selector).waypoint(function(){e(this).addClass("animation-start")},{offset:"85%"})}}}}(jQuery,this,_),function(d,e,t){d.fn.clickToggle=function(e,t){var i=[e,t];return this.data("toggleclicked",0),this.click(function(){var e=d(this).data(),t=e.toggleclicked;d.proxy(i[t],this)(),e.toggleclicked=(t+1)%2}),this},e.SITE.contactMap={selector:".google-map",init:function(){var p=this;d(p.selector).each(function(){var t=d(this),e=t.data("map-zoom"),i=t.data("map-center-lat"),n=t.data("map-center-long"),o=t.data("latlong"),a=t.data("pin-image"),r=t.next(".expand"),s=t.width(),l=new google.maps.LatLng(i,n),c={center:l,styles:[{featureType:"all",stylers:[{hue:"#0000b0"},{invert_lightness:"true"},{saturation:-30}]}],zoom:e,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,fullscreenControl:!1},u=new google.maps.Map(t[0],c);google.maps.event.addListenerOnce(u,"tilesloaded",function(){if(0<a.length){var e=new Image;e.src=a,d(e).load(function(){p.setMarkers(u,o,a)})}else p.setMarkers(u,o,a)}),TweenLite.to(t,2,{width:s,ease:Quart.easeOut,onUpdate:function(){google.maps.event.trigger(u,"resize"),u.setCenter(l)}}),r.clickToggle(function(){var e=t.parents(".post-content").width();return t.parents(".contact-map").css("overflow","visible"),TweenLite.to(t,2,{width:e,ease:Quart.easeOut,onUpdate:function(){google.maps.event.trigger(u,"resize"),u.setCenter(l)}}),!1},function(){return TweenLite.to(t,2,{width:s,ease:Quart.easeOut,onUpdate:function(){google.maps.event.trigger(u,"resize"),u.setCenter(l)},onComplete:function(){t.parents(".contact-map").css("overflow","hidden")}}),!1})})},setMarkers:function(r,s,l){function e(e){var t,i=s[e].lat_long.split(","),n=new google.maps.Marker({position:new google.maps.LatLng(i[0],i[1]),map:r,animation:google.maps.Animation.DROP,icon:l,optimized:!1}),o='<div class="marker-info-win"><img src="'+s[e].image+'" class="image" /><div class="marker-inner-win"><h1 class="marker-heading">'+s[e].title+"</h1><p>"+s[e].information+"</p></div></div>",a=new InfoBox({alignBottom:!0,content:o,disableAutoPan:!1,maxWidth:380,closeBoxMargin:"10px 10px 10px 10px",closeBoxURL:"http://www.google.com/intl/en_us/mapfiles/close.gif",pixelOffset:new google.maps.Size(-193,-41),zIndex:null,infoBoxClearance:new google.maps.Size(1,1)});c.push(a),google.maps.event.addListener(n,"click",(t=e,function(){c[t].open(r,this)}))}for(var c=[],t=0;t+1<=s.length;t++)setTimeout(e,250*t,t)}}}(jQuery,this,_),function(i,e,t){e.SITE.customScroll={selector:".custom_scroll",init:function(){var e=this,t=i(e.selector);t.each(function(){i(this).perfectScrollbar({wheelPropagation:!1,suppressScrollX:!0})}),win.resize(function(){e.resize(t)})},resize:function(e){e.perfectScrollbar("update")}}}(jQuery,this,_),function(y,e,t){e.SITE.equalArticlesHeight={selector:".blog-section article",init:function(){var e=parseFloat(y("body").css("font-size"));if(win.width()>40.063*e){var f=win.width()>64.063*e?4:2,t=y(this.selector),g=0,m=parseFloat(t.find(".post-content p").css("line-height")),h=t.length;t.each(function(e){var t=e+1,i=y(this).height();if(g<i&&(g=i),t%f==0||t==h){for(var n=t-f+t%f;n<t;n++){var o=y(".blog-section article:eq("+n+")"),a=o.height(),r=o.children("figure").outerHeight(!0),s=o.children("header").outerHeight(!0),l=o.children("a").outerHeight(!0),c=o.find(".post-content p"),u=c.outerHeight(!0)-c.outerHeight();if(a!==g){var p=parseInt((g-u-r-s-l)/m),d=1.6*p;c.height(d+"em").css("-webkit-line-clamp",p.toString()),o.height(g)}}g=0}})}}}}(jQuery,this,_),function(i,e,t){e.SITE.equalHeights={selector:"[data-equal]",init:function(){i(this.selector).each(function(){var e=i(this),t=e.data("equal");e.waitForImages(function(){e.find(t).matchHeight(!0)})})}}}(jQuery,this,_),function(s,e,i){e.SITE.fullHeightContent={selector:".full-height-content",init:function(){var e=this,t=s(e.selector);e.control(t),win.resize(i.debounce(function(){e.control(t)},50))},control:function(e){var i=s(".header"),t=s("#wpadminbar"),n=s(".footer-fixed"),o=t?t.outerHeight():0,a=n.length?s("#footer").outerHeight():0,r=-1<navigator.userAgent.toLowerCase().indexOf("firefox");e.each(function(){var e=s(this),t=win.height()-i.outerHeight()-o-a;r?e.css("height",t):e.css("min-height",t)})}}}(jQuery,this,_),function(p,d,f){d.SITE.masonry={selector:".masonry",init:function(){p(this.selector).each(function(){var s=p(this),e=s.children(".item"),l=p(s.data("loadmore")),t=s.find(".filters"),i=[],c=1;if(TweenLite.set(e,{opacity:0,y:100}),s.imagesLoaded(function(){s.isotope({itemSelector:".item",transitionDuration:0,masonry:{columnWidth:".grid-sizer"}}).isotope("once","layoutComplete",function(e,t){i=f.pluck(t,"element")}),s.isotope("layout"),win.scroll(f.debounce(function(){s.is(":in-viewport")&&TweenMax.staggerTo(i,1,{y:0,opacity:1,ease:Quart.easeOut},.25)},50)).trigger("scroll"),l.on("click",function(){var n=l.text(),e=l.data("type"),t=l.data("loading"),i=(l.data("nomore"),l.data("initial")),o=l.data("categories"),a=l.data("count"),r=(l.data("postinitial"),l.data("masonry"));if(!l.hasClass("loading"))return l.text(t).addClass("loading"),p.post(themeajax.url,{action:"thb_ajax",count:a,type:e,initial:i,style:r,categories:o,page:c++},function(e){var t=p.parseHTML(p.trim(e)),i=t?t.length:0;console.log(t),""===e||"undefined"===e||"No More Posts"===e||"No $args array created"===e?(e="",l.hide()):(p(t).appendTo(s).hide().imagesLoaded(function(){p(t).show(),d.SITE.equalArticlesHeight.init(),s.isotope("appended",p(t)),s.isotope("layout"),TweenMax.set(p(t),{opacity:0,y:100}),TweenMax.staggerTo(p(t),.25*i,{y:0,opacity:1,ease:Quart.easeOut,onComplete:d.SITE.overlay.init(p(t))},.25)}),i<a?l.hide():l.text(n).removeClass("loading"))}),!1})}),t.length){var n=t.next(".thb-toggle"),o=t.find("li"),a=o.length,r=t.find("a"),u=new TimelineMax({paused:!0});u.to(n,.1,{x:"-100%",ease:Quart.easeOut}).to(t,0,{className:"+=active",ease:Quart.easeOut}).delay(.25).to(t,.2,{y:"0"}).staggerFromTo(o,.1*a,{y:-20,opacity:0,ease:Quart.easeOut},{y:0,opacity:1,ease:Quart.easeOut},.1),n.on("click",function(){return u.timeScale(1).restart(),!1}),r.on("click",function(){var e=p(this),t=e.attr("data-filter");return r.removeClass("active"),e.addClass("active"),s.isotope("once","layoutComplete",function(e,t){var i=f.pluck(t,"element"),n=f.difference(f.pluck(e.items,"element"),i),o=new TimelineMax({onComplete:function(){u.timeScale(1.6).reverse()}});TweenLite.set(i,{opacity:0,y:100}),o.staggerTo(n,.1*n.length,{y:100,autoAlpha:0,ease:Quart.easeOut},.1,!1,function(){TweenMax.set(n,{display:"none"})}).staggerTo(i,.1*i.length,{y:0,autoAlpha:1,ease:Quart.easeOut},.1)}),s.isotope({filter:t}),!1})}})}}}(jQuery,this,_),function(c,u,e){u.SITE.mobileMenu={selector:"#mobile-menu",init:function(){var e=c("#mobile-menu"),t=e.find(".mobile-menu>li,.menu-footer p, .select-wrapper"),i=c(".mobile-toggle"),n=i.find("span"),o=e.find(".spacer"),a=e.find(".menu-container"),r=new TimelineLite({paused:!0,onStart:function(){e.css("display","block")},onComplete:function(){u.SITE.customScroll.init()},onReverseComplete:function(){e.css("display","none")}}),s=new TimelineLite({paused:!0}),l=c(".panel-close");AnimationsArray.push(r),AnimationsArray.push(s),r.add(TweenLite.to(e,.5,{autoAlpha:1,ease:Quart.easeOut})).add(TweenLite.to(a,.5,{x:0,ease:Quart.easeOut})).staggerTo(t,.1*t.length,{x:0,opacity:1,ease:Quart.easeOut},.1),s.add(TweenLite.to(n,.5,{x:"0%",ease:Quart.easeOut})).add(TweenLite.to(i.find("div"),.5,{rotation:90,ease:Quart.easeOut})).add(TweenLite.to(n.eq(0),.2,{y:"-2",ease:Quart.easeOut})).add(TweenLite.to(n.eq(2),.2,{y:"2",ease:Quart.easeOut}),"-=0.2"),i.hover(function(){i.data("toggled")||s.restart()},function(){i.data("toggled")||s.reverse()}).on("click",function(){return i.data("toggled")?(r.timeScale(1.6).reverse(),i.data("toggled",!1)):(u.SITE.reverseAnimations.start([r,s]),r.timeScale(1.6).restart(),i.data("toggled",!0)),!1}),o.add(l).on("click",function(){r.timeScale(1.6).reverse(),s.reverse(),i.data("toggled",!1)})}}}(jQuery,this,_),function(e,n,t){n.SITE.mouseScroll={selector:".mouse-scroll",init:function(){e(this.selector).each(function(){var i=e(this);i.on("click",function(){var e=i.parents(".row"),t=e.height();return TweenMax.to(n,1,{scrollTo:{y:e.scrollTop()+t},ease:Quart.easeOut}),!1})})}}}(jQuery,this,_),function(o,e,t){e.SITE.overlay={selector:".overlay-effect .overlay",init:function(e){var t=o(this.selector);(e?e.find(this.selector):t).each(function(){var e=o(this),t=e.find(".child"),i=new TimelineLite({paused:!0}),n=t.find("hr");TweenLite.set(t,{opacity:0,y:50}),i.add(TweenLite.to(e,.3,{opacity:1,top:10,left:10,right:10,bottom:10,ease:Quart.easeOut})).add(TweenMax.staggerTo(t,.3,{y:0,opacity:1,ease:Quart.easeOut},.15)).add(TweenLite.to(n,.15,{scaleX:1,ease:Quart.easeOut}),"-=0.25"),e.hoverIntent(function(){i.timeScale(1).play()},function(){i.timeScale(1.6).reverse()})})}}}(jQuery,this,_),function(e,t,i){t.SITE.parallaxBg={selector:".parallax-bg",init:function(){e(this.selector),Modernizr.touch||e.stellar({horizontalScrolling:!1,verticalOffset:40})}}}(jQuery,this,_),function(n,e,i){e.SITE.portfolioText={selector:".portfolio-text-style",init:function(){var e=this,t=n(e.selector);TweenLite.set(t,{autoAlpha:0,x:100}),e.control(t),win.scroll(i.debounce(function(){e.control(t)},50)),win.resize(i.debounce(function(){e.control(t)},50))},control:function(e){var t=0,i=e.length;e.filter(":in-viewport").each(function(){var e=n(this);"0"===e.css("opacity")&&(TweenLite.to(e,.1*i,{delay:.1*t,x:0,autoAlpha:1,ease:Quart.easeOut}),t++)})}}}(jQuery,this,_),function(o,e,t){e.SITE.postsNavOverlay={selector:".portfolio-nav",init:function(){o(this.selector).find("a").each(function(){var e=o(this),t=e.find(".overlay"),i=e.find("span"),n=new TimelineLite({paused:!0});TweenLite.set(t,{opacity:0}),TweenLite.set(i,{opacity:0,y:20}),n.add(TweenLite.to(t,.25,{opacity:1,ease:Quart.easeOut})).add(TweenMax.staggerTo(i,.25,{y:0,opacity:1,ease:Quart.easeOut},.1)),e.hover(function(){n.timeScale(1.6).restart()},function(){n.timeScale(1.6).reverse()})})}}}(jQuery,this,_),function(f,d,e){d.SITE.projectsMap={selector:".projects-google-map",init:function(){var p=this;f(p.selector).each(function(){var e,t=f(this),i=t.parent().hasClass("small-projects-map"),n=i?1:2,o=t.data("map-center-lat"),a=t.data("map-center-long"),r=t.data("latlong"),s=t.data("pin-image"),l=t.data("pin-protected-image");1900<=f(d).width()&&(n=i?2:3),e=[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#ff0000"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#444444"},{weight:"0.4"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"administrative.country",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2d2d2d"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45},{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#434343"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#454545"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#151515"},{visibility:"on"}]}];var c={center:new google.maps.LatLng(o,a),styles:e,zoom:n,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,disableDefaultUI:!0,backgroundColor:"#151515"},u=new google.maps.Map(t[0],c);google.maps.event.addListenerOnce(u,"tilesloaded",function(){var e=document.createElement("div");new function(e,t){e.style.padding="15px";var i=document.createElement("div");i.className="zoom-control-wrap",e.appendChild(i);var n=document.createElement("div");n.className="zoom-control zoom-in",n.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve"> <rect x="10" y="17" fill="#060808" width="16" height="2"/> <rect x="17" y="10" fill="#060808" width="2" height="16"/></svg>',i.appendChild(n);var o=document.createElement("div");o.className="zoom-control zoom-out",o.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve"> <rect x="10" y="17" fill="#060808" width="16" height="2"/></svg>',i.appendChild(o),google.maps.event.addDomListener(n,"click",function(){t.setZoom(t.getZoom()+1)}),google.maps.event.addDomListener(o,"click",function(){t.setZoom(t.getZoom()-1)})}(e,u);if(e.index=1,u.controls[google.maps.ControlPosition.RIGHT_TOP].push(e),0<s.length){var t=new Image;t.src=s,f(t).load(function(){p.setMarkers(u,r,s,l)})}else p.setMarkers(u,r,s,l)})})},setMarkers:function(l,c,u,p){function e(e){var t,i=c[e].lat_long.split(","),n=f(".projects-google-map").parent().hasClass("small-projects-map"),o={url:""==c[e].link?p:u,scaledSize:n&&win.width()<1900?new google.maps.Size(13,25):new google.maps.Size(36,51)},a=new google.maps.Marker({position:new google.maps.LatLng(i[0],i[1]),map:l,animation:google.maps.Animation.DROP,title:""==c[e].link?"Protected project marker":"Open project marker",icon:o,optimized:!1,zIndex:""==c[e].link?10:100}),r='<div class="marker-info-win project-marker-info"><a href="'+c[e].link+'" target="_blank"><img src="'+c[e].image+'" alt="'+c[e].title+'"/></a><div class="marker-inner-win clearfix"><a href="'+c[e].link+'" target="_blank"><h5 class="marker-heading">'+c[e].title+'</h5></a><a class="project-marker-link" href="'+c[e].link+'" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="7px" viewBox="0 0 35 7" enable-background="new 0 0 841.89 595.281" xml:space="preserve"><circle fill="#221F1F" cx="3.5" cy="3.5" r="3.5"/><circle fill="#221F1F" cx="17.5" cy="3.5" r="3.5"/><circle fill="#221F1F" cx="31.5" cy="3.5" r="3.5"/></svg></a></div></div>',s=""==c[e].link?new InfoBox({closeBoxURL:""}):new InfoBox({alignBottom:!0,content:r,disableAutoPan:!1,maxWidth:380,closeBoxMargin:"10px 10px 10px 10px",closeBoxURL:"",pixelOffset:n?new google.maps.Size(-95,-46):new google.maps.Size(-190,-46),zIndex:null,infoBoxClearance:new google.maps.Size(1,1)});d.push(s),google.maps.event.addListener(a,"click",(t=e,function(){for(var e=0;e<d.length;e++)d[e].close();d[t].open(l,this)})),google.maps.event.addListener(l,"click",function(){for(var e=0;e<d.length;e++)d[e].close()})}for(var d=[],t=0;t+1<=c.length;t++)setTimeout(e,250*t,t)}}}(jQuery,this,_),function(a,r,e){r.SITE.quickSearch={selector:"#quick_search",init:function(){var e=a(this.selector),t=a("#searchpopup"),i=t.find(".spacer"),n=t.find("p, input"),o=new TimelineLite({paused:!0,onStart:function(){t.css("display","block")},onReverseComplete:function(){t.css("display","none")}});AnimationsArray.push(o),o.add(TweenLite.to(t,.5,{autoAlpha:1,ease:Quart.easeOut})).staggerFrom(n,.2,{y:"50",opacity:0,ease:Quart.easeOut},.1),e.on("click",function(){return e.data("toggled")?(o.timeScale(1.6).reverse(),e.data("toggled",!1)):(r.SITE.reverseAnimations.start([o]),o.timeScale(1.6).restart(),e.data("toggled",!0)),!1}),i.on("click",function(){o.timeScale(1.6).reverse(),e.data("toggled",!1)})}}}(jQuery,this,_),function(n,e,o){e.SITE.reverseAnimations={start:function(e){for(var t=o.difference(AnimationsArray,e),i=0;i<t.length;++i)0<t[i].progress()&&(t[i].timeScale(1.6).reverse(),n(".mobile-toggle").data("toggled",!1),n("#quick_search").data("toggled",!1))}}}(jQuery,this,_),function(r,s,e){s.SITE.sharePost={selector:".share-wrapper > .btn",init:function(){r(this.selector).each(function(){var e=r(this),t=e.next(".share-container"),i=t.find(".social"),n=t.find(".spacer"),o=new TimelineLite({paused:!0,onStart:function(){t.css("display","block")},onReverseComplete:function(){t.css("display","none")}}),a=t.find("h6, .boxed-icon");AnimationsArray.push(o),o.add(TweenLite.to(t,.5,{autoAlpha:1,ease:Quart.easeOut})).staggerFrom(a,.1*a.length,{y:"50",opacity:0,ease:Quart.easeOut},.1),e.on("click",function(e){return s.SITE.reverseAnimations.start([o]),o.timeScale(1.6).restart(),!1}),n.on("click",function(){o.timeScale(1.6).reverse()}),i.on("click",function(){var e=screen.width/2-320,t=screen.height/2-220-100;return s.open(r(this).attr("href"),"mywin","left="+e+",top="+t+",width=640,height=440,toolbar=0"),!1})})}}}(jQuery,this,_),function(i,e,t){e.SITE.showAllAwards={selector:".show-all-awards",init:function(){var e=i(this.selector),t=e.parents(".awards-wrap").find(".award-hide");e.each(function(){var e=i(this);e.on("click",function(){return e.hide(),TweenMax.staggerTo(t,.1*t.length,{autoAlpha:1,display:"block",ease:Quart.easeOut},.1),!1})})}}}(jQuery,this,_),function(e,t,i){t.SITE.smoothScroll={selector:".smooth-scroll",init:function(){smoothScroll()}}}(jQuery,this,_),function(t,i,n){i.SITE.toTop={selector:"#scroll_totop",init:function(){var e=this;t(e.selector).on("click",function(){return TweenMax.to(i,.5,{scrollTo:{y:0},ease:Quart.easeOut}),!1}),win.scroll(n.debounce(function(){e.control()},50))},control:function(){var e=t(this.selector);$doc.height()-(win.scrollTop()+win.height())<300?TweenMax.to(e,.2,{autoAlpha:1,ease:Quart.easeOut}):TweenMax.to(e,.2,{autoAlpha:0,ease:Quart.easeOut})}}}(jQuery,this,_);